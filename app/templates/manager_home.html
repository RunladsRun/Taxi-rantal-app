<!-- app/templates/manager_home.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Manager Home</title>
</head>
<body>
    <h1>Welcome, Manager!</h1>
    <p>Your SSN: {{ identifier }}</p>

    <h2>Manager Actions</h2>



    <h3>Add a Driver</h3>
    <form method="POST" action="/manager/add_driver">
        <label>Driver Name:</label>
        <input type="text" name="name" required><br>
        <label>Driver Address:</label>
        <input type="text" name="address" required><br>
        <button type="submit">Add Driver</button>
    </form>

        <hr>
    <h3>Add a Car Model</h3>
    <form method="POST" action="/manager/add_model">
        <label>Model Name:</label>
        <input type="text" name="model_name" required><br>
        <label>Passenger Capacity:</label>
        <input type="number" name="num_passengers" required><br>
        <label>Car Type:</label>
        <input type="text" name="car_type" required><br>
        <button type="submit">Add Model</button>
    </form>

    <hr>
    <h3>Add a Car</h3>
    <form method="POST" action="/manager/add_car">
        <label>Car ID:</label>
        <input type="text" name="car_id" required><br>
        <label>Model Name:</label>
        <input type="text" name="model_name" required><br>
        <label>Location:</label>
        <input type="text" name="location" required><br>
        <button type="submit">Add Car</button>
    </form>


    <hr>
    <h3>Top-K Clients by Rental Count</h3>
    <form method="POST" action="/manager/top_k_clients">
        <label>Enter K:</label>
        <input type="number" name="k" required min="1"><br>
        <button type="submit">Show Top K</button>
    </form>

    {% if top_clients %}
        <h4>Top Clients:</h4>
        <ul>
            {% for client in top_clients %}
                <li>{{ client.email }} — {{ client.count }} rentals</li>
            {% endfor %}
        </ul>
    {% endif %}


        <hr>
    <h3>Car Model Rental Count</h3>
    <form method="GET" action="/manager/model_rental_count">
        <button type="submit">Show Rental Counts</button>
    </form>

    {% if model_counts %}
        <ul>
        {% for item in model_counts %}
            <li>{{ item.model }} — {{ item.count }} rentals</li>
        {% endfor %}
        </ul>
    {% endif %}


        <hr>
    <h3>Driver Rental Count and Avg Rating</h3>
    <form method="GET" action="/manager/driver_stats">
        <button type="submit">Show Driver Stats</button>
    </form>

    {% if driver_stats %}
        <ul>
        {% for d in driver_stats %}
            <li>{{ d.name }} — {{ d.count }} rentals, avg rating: {{ d.avg }}</li>
        {% endfor %}
        </ul>
    {% endif %}


        <hr>
    <h3>Client-Driver Pairs by Start City</h3>
    <form method="GET" action="/manager/client_driver_pairs">
        <button type="submit">Show Client-Driver Pairs</button>
    </form>

    {% if city_pairs %}
        <ul>
        {% for pair in city_pairs %}
            <li>{{ pair.city }} — {{ pair.client }} ↔ {{ pair.driver }}</li>
        {% endfor %}
        </ul>
    {% endif %}



</body>
</html>
